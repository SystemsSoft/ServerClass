<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <base href="/">
    <meta charset="UTF-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <title>Estrelas de Leiria</title>

    <meta name="description" content="Estrelas de Leiria 2025.">
    <meta name="keywords" content="Leiria, Gala, Prémios, Votação, Empreendedorismo, Estrelas de Leiria">
    <meta property="og:title" content="Estrelas de Leiria">
    <meta property="og:image" content="https://www.estrelasdeleiria.pt/assets/assets/logo.webp">
    <meta property="og:url" content="https://www.estrelasdeleiria.pt/">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="pt_PT">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Estrelas de Leiria">
    <link rel="apple-touch-icon" href="icons/Icon-192.png">

    <link rel="icon" type="image/png" href="favicon.png"/>

    <link rel="manifest" href="manifest.json">

    <style>
        body {
            background-color: #000000;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            width: 100vw;
            overflow-x: hidden;
        }

        /* Canvas para o fundo estrelado animado */
        #skyCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -2;
        }

        /* 2. CAMADA DE MOLDURA/IMAGEM */
        .overlay-estrelas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 400%;
            pointer-events: none;
            z-index: -1;
        }

        /* --- TELA DE CARREGAMENTO (LOADER) --- */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000000;
            z-index: 9999; /* Fica acima de tudo */
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease-out; /* Transição suave ao sumir */
        }

        /* Container da Estrela SVG */
        .star-loader {
            width: 100px;
            height: 100px;
            overflow: visible;
        }

        /* Caminho da Estrela (O desenho) */
        .star-path {
            fill: transparent; /* Começa transparente */
            stroke: #ffffff;   /* Cor do contorno inicial */
            stroke-width: 2;
            stroke-dasharray: 300; /* Comprimento do traço para animação */
            stroke-dashoffset: 300; /* Começa escondido */
            animation: formStar 2.5s ease-in-out forwards, pulseStar 2s ease-in-out infinite 2.5s;
            transform-origin: center;
        }

        /* Animação 1: Desenhando e Preenchendo a Estrela */
        @keyframes formStar {
            0% {
                stroke-dashoffset: 300; /* Totalmente invisível (só traço) */
                fill: transparent;
                transform: scale(0.5) rotate(-30deg);
                opacity: 0;
            }
            40% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
            70% {
                stroke-dashoffset: 0; /* Contorno completo */
                fill: rgba(255, 255, 255, 0.1);
                stroke: #ffffff;
            }
            100% {
                stroke-dashoffset: 0;
                fill: #ffffff; /* Preenchimento total branco */
                stroke: #ffffff;
                filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.8)); /* Brilho */
                transform: scale(1.1);
            }
        }

        /* Animação 2: Pulsar depois de formada (caso o load demore) */
        @keyframes pulseStar {
            0%, 100% {
                transform: scale(1.1);
                filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.8));
            }
            50% {
                transform: scale(1.0);
                filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.4));
            }
        }

        .loading-text {
            position: absolute;
            bottom: 30%;
            color: rgba(255, 255, 255, 0.6);
            font-family: sans-serif;
            font-size: 14px;
            letter-spacing: 2px;
            animation: fadeInText 3s ease-in-out forwards;
            opacity: 0;
        }

        /* Pseudoelemento para os pontos animados */
        .loading-text::after {
            content: '';
            animation: dots 2s infinite steps(1);
            position: absolute;
            left: 100%;
        }

        @keyframes fadeInText {
            0%, 50% { opacity: 0; }
            100% { opacity: 1; }
        }

        /* Animação dos pontos (reticências) */
        @keyframes dots {
            0% { content: ''; }
            25% { content: '.'; }
            50% { content: '..'; }
            75% { content: '...'; }
        }
    </style>
</head>
<body>

<!-- TELA DE CARREGAMENTO -->
<div id="loading-screen">
    <!-- SVG da Estrela -->
    <svg class="star-loader" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <!-- Desenho de uma estrela de 5 pontas -->
        <path class="star-path" d="M50 5 L63 35 L95 35 L70 55 L80 85 L50 70 L20 85 L30 55 L5 35 L37 35 Z" />
    </svg>
    <div class="loading-text">CARREGANDO</div>
</div>

<!-- Canvas do Céu Animado -->
<canvas id="skyCanvas"></canvas>

<!-- Overlay Original -->
<div class="overlay-estrelas"></div>

<!-- Script da Animação das Estrelas (Fundo) -->
<script>
    const canvas = document.getElementById('skyCanvas');
    const ctx = canvas.getContext('2d');

    let width, height;
    let stars = [];
    const TOTAL_STARS = 400;

    function resize() {
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;
        initStars();
    }

    class Star {
        constructor() {
            this.reset();
            this.opacity = Math.random();
        }

        reset() {
            this.x = Math.random() * width;
            this.y = Math.random() * height;
            this.size = Math.random() * 2;
            this.blinkSpeed = 0.005 + Math.random() * 0.02;
            this.blinkDirection = Math.random() > 0.5 ? 1 : -1;
            const colors = ['255, 255, 255', '200, 220, 255', '230, 240, 255'];
            this.color = colors[Math.floor(Math.random() * colors.length)];
        }

        update() {
            this.opacity += this.blinkSpeed * this.blinkDirection;

            if (this.opacity >= 1) {
                this.opacity = 1;
                this.blinkDirection = -1;
            } else if (this.opacity <= 0.1) {
                this.opacity = 0.1;
                this.blinkDirection = 1;
                if (Math.random() > 0.95) {
                    this.x = Math.random() * width;
                    this.y = Math.random() * height;
                }
            }
        }

        draw() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.shadowBlur = this.size * 3;
            ctx.shadowColor = `rgba(${this.color}, ${this.opacity})`;
            ctx.fillStyle = `rgba(${this.color}, ${this.opacity})`;
            ctx.fill();
            ctx.shadowBlur = 0;
        }
    }

    function initStars() {
        stars = [];
        for (let i = 0; i < TOTAL_STARS; i++) {
            stars.push(new Star());
        }
    }

    function drawBackground() {
        const gradient = ctx.createLinearGradient(0, 0, 0, height);
        gradient.addColorStop(0, '#020b1a');
        gradient.addColorStop(1, '#000000');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, width, height);
    }

    function animate() {
        drawBackground();
        stars.forEach(star => {
            star.update();
            star.draw();
        });
        requestAnimationFrame(animate);
    }

    window.addEventListener('resize', resize);
    resize();
    animate();

    // --- LÓGICA DO CARREGAMENTO ---
    window.addEventListener('load', function() {
        const loader = document.getElementById('loading-screen');
        // Mantém a tela de carregamento por pelo menos 2.5s para ver a animação de "formação"
        // Se o site carregar antes disso, o usuário ainda verá a estrela se formar.
        setTimeout(() => {
            loader.style.opacity = '0'; // Fade out
            setTimeout(() => {
                loader.remove(); // Remove do DOM para liberar cliques
            }, 800); // Tempo igual ao transition do CSS
        }, 2500);
    });
</script>

<!-- Script do Flutter -->
<script src="flutter_bootstrap.js" async></script>
</body>
</html>